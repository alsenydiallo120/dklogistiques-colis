{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block Content %}

<div class='row'>
    <div class='col-md-12'>
        <div class='card'>
            <div class='card-header text-dark'>
                <div class='card-body'>
                    <div class="row">
                        <div class="col-md-10">
                            <h5>Modification du colis <span style="color:#028FC5"></span></h5>
                        </div>
                    </div>
                    <hr>
                    <form action='' method='post'>
                        {% csrf_token %}
                        <div class="row mt-2">
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-12">{{ form.expditaire|as_crispy_field }}</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="col-md-12">{{ form.destinataire|as_crispy_field }}</div>
                            </div>
                            <hr>

                        <div class="col-md-12" hidden>{{ form.taux|as_crispy_field }}</div>

                        <div class="row">
                            <div class="col-md-2">{{ form.poids|as_crispy_field }}</div>
                            <div class="col-md-2">{{ form.prix|as_crispy_field }}</div>
                            <div class="col-md-2">{{ form.nombre_colis|as_crispy_field }}</div>
                            <div class="col-md-2" hidden>{{ form.devise|as_crispy_field }}</div>
                            <div class="col-md-3">{{ form.montant_euro|as_crispy_field }}</div>
                            <div class="col-md-3">{{ form.montant_gnf|as_crispy_field }}</div>
                            <div class="col-md-12">{{ form.contenu|as_crispy_field }}</div>
                        </div>
                    
                        <hr>
                        <div class="row">
                            <div class="col-md-4">{{ form.montant_paye|as_crispy_field }}</div>
                            <div class="col-md-4">{{ form.devise_montantpaye|as_crispy_field }}</div>
                            <div class="col-md-4">{{ form.code|as_crispy_field }}</div>
                            <div class="col-md-4">
                                <button class='btn btn-primary' type='submit'>Modifier</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    {% endblock %}

    {% block Script %}
        <script>
            $(document).ready(function(){
            
                $('#expditaire').change(function(){
                    let nom=$(this).find('option:selected').attr("data-nom")
                    let telephone=$(this).find('option:selected').attr("data-tel")
                    let email=$(this).val()
                    $('#id_expditaire').val(nom)
                    $('#id_tel_expeditaire').val(telephone)
                    $('#id_email_expeditaire').val(email)
                })

                $('#id_destinataire').change(function(){
                    let nom=$(this).find('option:selected').attr("data-nom")
                    let telephone=$(this).find('option:selected').attr("data-telephone")
                    let email=$(this).find('option:selected').attr("data-email")
                    $('#nom').val(nom)
                    $('#telephone').val(telephone)
                    $('#email').val(email)
                })
            })
        </script>
    {% endblock Script %}
